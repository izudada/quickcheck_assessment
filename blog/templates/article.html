{% extends 'base.html' %}
{% block title %} Home {% endblock %}

{% block body %}
    <div class="container">
        <h1> {{ article.title}}</h1>
        <p>
            By: <small> <strong>  {{ article.author}} </strong></small>
        </p>
        <p>
            <small>{{ article.date_created}}</small>
        </p>
        {% if article.body != 'none'%}
            <p>{{ article.body }}</p>
        {% else %}
            <a href="{{article.url}}">  Read more...</a>
        {% endif %}
        <p id="article-id" hidden>{{ article.id }}</p>

        <h3>Comments</h3>

    </div>


    <script>
        const link = 'http://127.0.0.1:8000/'
        var news = document.getElementById('article-id');
        var news_id = news.innerHTML;
        request = {'id': news_id}
        $.ajax({
            type: 'GET',
            url : `${link}comment/`,
            data: request,
            success: function(response){
                for(var i=0; i < response.comments.length; i++) {
                    $(".container").append(
                        `
                            <p> ${response.comments[i].text}</p>
                        `
                    )
                }
            },
            error: function(error) {
                console.log(error)
            }
        })
    </script>
{% endblock %}